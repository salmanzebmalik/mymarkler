<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head th:replace="layout_fragments :: head('MyMakler - Edit Profile')"></head>

<body>
<nav th:replace="layout_fragments :: nav('profile')"></nav>

<main role="main" class="container">
    <h3 class="mb-4">Edit Profile</h3>

    <form class="mt-4 mx-auto col-sm-10" th:object="${user}" th:action="@{/users/update}" method="post">
        <div th:if="${#fields.hasErrors('global')}"
             th:each="error : ${#fields.errors('global')}"
             th:text="${error}"
             class="alert alert-danger" role="alert">
            global error
        </div>

        <div class="form-group row">
            <label for="cityOfOrigin" class="col-sm-2 col-form-label">City Of Origin</label>
            <input id="cityOfOrigin"
                   class="form-control col-sm-10"
                   th:field="*{cityOfOrigin}"
                   th:classappend="${#fields.hasErrors('cityOfOrigin')} ? is-invalid : ''"
                   type="text"
                   required>
            <div th:if="${#fields.hasErrors('cityOfOrigin')}" th:errors="*{cityOfOrigin}" class="invalid-feedback">
                error
            </div>
        </div>

        <div class="form-group row">
            <label for="email" class="col-sm-2 col-form-label">Email</label>
            <input id="email"
                   class="form-control col-sm-10"
                   th:field="*{email}"
                   th:classappend="${#fields.hasErrors('email')} ? is-invalid : ''"
                   type="text"
                   required>
            <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="invalid-feedback">error</div>
        </div>

        <div class="form-group row">
            <label for="plaintextPassword" class="col-sm-2 col-form-label">Password</label>
            <input id="plaintextPassword"
                   class="form-control col-sm-10"
                   th:field="*{plaintextPassword}"
                   th:classappend="${#fields.hasErrors('plaintextPassword')} ? is-invalid : ''"
                   type="password"
                   placeholder="Password"
                   autocomplete="new-password">
            <div th:if="${#fields.hasErrors('plaintextPassword')}" th:errors="*{plaintextPassword}" class="invalid-feedback">
                error
            </div>
        </div>

        <div class="form-group row">
            <label for="attributes" class="col-sm-2 col-form-label">Attributes</label>
            <input id="attributes"
                   class="form-control col-sm-10"
                   th:field="*{attributes}"
                   th:classappend="${#fields.hasErrors('attributes')} ? is-invalid : ''"
                   type="text"
                   placeholder="Attributes, input like 'nonsmoker,outgoing,...'">
            <div th:if="${#fields.hasErrors('attributes')}" th:errors="*{attributes}" class="invalid-feedback">
              error
            </div>
        </div>

        <div class="form-group row col-sm-4 w-50 mx-auto">
            <input id="confirmationPassword"
                   class="form-control"
                   th:field="*{confirmationPassword}"
                   th:classappend="${#fields.hasErrors('confirmationPassword')} ? is-invalid : ''"
                   type="password"
                   placeholder="Confirm changes with password"
                   autocomplete="new-password">
            <button type="submit" class="btn btn-primary form-control">Update details</button>
            <div th:if="${#fields.hasErrors('confirmationPassword')}" th:errors="*{confirmationPassword}" class="invalid-feedback">
                error
            </div>
        </div>

        <input type="hidden" id="username" th:field="*{username}">
        <input type="hidden" role="role" th:field="*{role}">
    </form>
</main>

<footer th:replace="layout_fragments :: footer"></footer>
</body>
</html>
